(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{445:function(s,a,t){"use strict";t.r(a);var e=t(47),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"鲁班-h5-v-1-12-0-至-v-1-13-0-迁移指南"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#鲁班-h5-v-1-12-0-至-v-1-13-0-迁移指南"}},[s._v("#")]),s._v(" 鲁班 H5 v.1.12.0 至 v.1.13.0 迁移指南")]),s._v(" "),t("p",[s._v("升级 "),t("code",[s._v("鲁班H5")]),s._v(" 版本至 "),t("code",[s._v("v.1.13.0")]),s._v("。")]),s._v(" "),t("p",[s._v("主要修改请参见 "),t("a",{attrs:{href:"https://github.com/ly525/luban-h5/releases/tag/v1.13.0",target:"_blank",rel:"noopener noreferrer"}},[s._v("v1.13.0 release log"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"背景介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#背景介绍"}},[s._v("#")]),s._v(" 背景介绍")]),s._v(" "),t("p",[s._v("因为涉及了数据库字段的改动，但比较简单：是将 works 表的 mode 列重命名为 page_mode")]),s._v(" "),t("p",[s._v("原因是：mode 是一个无意义的词语，因此改为 page_mode 用来表明 H5 作品的页面的当前模式，是：")]),s._v(" "),t("ul",[t("li",[s._v("长页面 (PAGE_MODE.LONG_PAGE)")]),s._v(" "),t("li",[s._v("翻页 H5(PAGE_MODE.SWIPPER_PAGE)")])]),s._v(" "),t("h3",{attrs:{id:"升级步骤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#升级步骤"}},[s._v("#")]),s._v(" 升级步骤")]),s._v(" "),t("ol",[t("li",[s._v("请根据自己的数据库，选择更新方案")])]),s._v(" "),t("ul",[t("li",[s._v("MySQL")])]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" works "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RENAME")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COLUMN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mode")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TO")]),s._v(" page_mode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("ul",[t("li",[s._v("Sqlite")])]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sqlite3 luban-h5/back-end/h5-api/.tmp/data.db")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" works "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RENAME")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COLUMN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mode")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TO")]),s._v(" page_mode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("sqlite3 luban-h5/back-end/h5-api/.tmp/data.db\nSQLite version "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.28")]),s._v(".0 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("-04-15 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":49:49\nEnter "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('".help"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" usage hints.\nsqlite"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ALTER TABLE works RENAME COLUMN mode TO page_mode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nsqlite"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" .exit\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("前端代码更新")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pull 最新代码")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重新编译前端代码")]),s._v("\n./luban-h5 rebuild_fe\n./luban-h5 restart\n")])])]),t("p",[s._v("如果有疑问，提 "),t("a",{attrs:{href:"https://github.com/ly525/luban-h5/issues",target:"_blank",rel:"noopener noreferrer"}},[s._v("issue"),t("OutboundLink")],1),s._v(" 即可")])])}),[],!1,null,null,null);a.default=r.exports}}]);